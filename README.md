# Визуализатор зависимостей

Программа анализирует историю коммитов в указанной ветке, извлекает информацию о коммитах и генерирует граф зависимостей в формате Mermaid. Граф можно отобразить с помощью стороннего инструмента, например, [Mermaid CLI](https://github.com/mermaid-js/mermaid-cli), чтобы создать изображение SVG.

**Проект использует Python и Git, а также требует наличия инструментов для рендеринга Mermaid-графов.**

## Описание всех функций и настроек

### Основные функции

- **Загрузка конфигурации**: Программа загружает конфигурацию из CSV-файла, который содержит:
  - Путь к программе для визуализации графов Mermaid.
  - Путь к Git-репозиторию.
  - Имя ветки в репозитории.
  
- **Парсинг объектов Git**: Программа разбирает следующие типы объектов:
  - commit: Извлекаются метаданные, включая хэш дерева, ссылки на родителей и сообщение коммита.
  - tree: Анализируется содержимое дерева, извлекаются объекты и их хэши.
  - blob: Простые объекты данных, отображаемые без зависимостей.


- **Генерация Mermaid-графа**: Для указанных коммитов и их зависимостей создается граф, отображающий связи между коммитами, деревьями и blob-объектами. Сообщения коммитов добавляются в граф для удобства анализа.
- **Визуализация графа**: Сгенерированный Mermaid-файл автоматически преобразуется в изображение SVG с помощью указанного инструмента визуализации.

### Настройки

Конфигурация хранится в CSV-файле следующего формата:

```csv
graph_tool,repo_path,branch_name
[путь к программе mermaid],[путь к гит-репозиторию],[название ветки]
```

Также для рендеринга графов необходимо установить mermaid-cli. Это можно сделать командой:
```bash
npm install -g @mermaid-js/mermaid-cli
```

## Описание команд для сборки проекта

После настройки конфигурационного файла, можно запустить программу командой:
```bash
python visualizer.py
```

Это создаст граф коммитов для указанной ветки и сохранит изображение графа в SVG-файле с именем [branch_name]_graph.svg.

## Пример использования

1. Ввод команды в консоль:
   
   ![image](https://github.com/user-attachments/assets/51a2cf0b-e0e1-41bb-81bc-b7ba31046448)

2. Если указана ветка master, то создается файл master_graph.svg с графом коммитов для ветки master:

    ![master_graph](https://github.com/user-attachments/assets/778da749-8e3c-40a9-9631-b120518763ce)
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1347.3046875 590" style="max-width: 1347.3px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"></svg>

3. Если указана ветка other_branch, то создается файл other_branch_graph.svg с графом коммитов для ветки other_branch:

    ![other_branch_graph](https://github.com/user-attachments/assets/dcc023c2-80eb-4164-aa8f-c8f246583574)

## Результаты прогона тестов

Для проверки корректности работы программы предусмотрены тесты, которые можно выполнить с помощью unittest командой:
```bash
python -m unittest tests.py
```

Признаком корректной работы программы является такой вывод после прогона тестов:

   ![image](https://github.com/user-attachments/assets/6dddced2-c9ba-474a-837d-d4b08316936a)
