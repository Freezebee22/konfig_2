# Визуализатор зависимостей

Программа анализирует историю коммитов в указанной ветке, извлекает информацию о коммитах и генерирует граф зависимостей в формате Mermaid. Граф можно отобразить с помощью стороннего инструмента, например, [Mermaid CLI](https://github.com/mermaid-js/mermaid-cli), чтобы создать изображение PNG.

**Проект использует Python и Git, а также требует наличия инструментов для рендеринга Mermaid-графов.**

## Описание всех функций и настроек

### Основные функции

- **Загрузка конфигурации**: Программа загружает конфигурацию из CSV-файла, который содержит:
  - Путь к программе для визуализации графов Mermaid.
  - Путь к Git-репозиторию.
  - Имя ветки в репозитории.
  
- **Получение зависимостей коммитов**: Функция `get_commit_dependencies` получает список всех коммитов и их родительских зависимостей для указанной ветки.

- **Генерация Mermaid-графа**: Функция `generate_mermaid_graph` генерирует граф зависимостей в формате Mermaid, используя информацию о коммитах и их родителях.

- **Визуализация графа**: Функция `visualize` создает граф Mermaid и рендерит его в изображение PNG с помощью инструмента`mermaid-cli`.

### Настройки

Конфигурация хранится в CSV-файле следующего формата:

```csv
graph_tool,repo_path,branch_name
[путь к программе mermaid],[путь к гит-репозиторию],[название ветки]
```

Также для рендеринга графов необходимо установить mermaid-cli. Это можно сделать командой:
```bash
npm install -g @mermaid-js/mermaid-cli
```

## Описание команд для сборки проекта

После настройки конфигурационного файла, можно запустить программу командой:
```bash
python visualizer.py config.csv
```

Это создаст граф коммитов для указанной ветки и сохранит изображение графа в PNG-файле с именем [branch_name]_graph.png.

## Пример использования

1. Ввод команды в консоль:
   
   ![image](https://github.com/user-attachments/assets/49ae2edd-518d-471c-9279-b6b2198cb397)

2. Если указана ветка master, то создается файл master_graph.png с графом коммитов для ветки other_branch:

    ![master_graph](https://github.com/user-attachments/assets/c9781c9e-074b-4557-a2c1-9f2f9c35c097)

3. Если указана ветка other_branch, то создается файл other_branch_graph.png с графом коммитов для ветки other_branch:

   ![other_branch_graph](https://github.com/user-attachments/assets/5833f587-759a-4096-93ce-793f817c3554)

## Результаты прогона тестов

Для проверки корректности работы программы предусмотрены тесты, которые можно выполнить с помощью unittest командой:
```bash
python -m unittest tests.py
```

Признаком корректной работы программы является такой вывод после прогона тестов:

   ![image](https://github.com/user-attachments/assets/6dddced2-c9ba-474a-837d-d4b08316936a)
